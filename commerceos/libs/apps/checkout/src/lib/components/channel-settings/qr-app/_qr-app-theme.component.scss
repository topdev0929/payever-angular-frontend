@use 'SASS:map';

@mixin color($color-config) {
  $select-button: map.get($color-config, 'select-button');
  $text-color: map.get($color-config, 'text-color');
  $row-background: map.get($color-config, 'row-background');
  $border: map.get($color-config, 'border');
  $background: map.get($color-config, 'background');
  $spinner: map.get($color-config, 'spinner');
  $background: map.get($color-config, 'background');
  $content: map.get($color-config, 'content');
  $confirm: map.get($color-config, 'confirm');
  $warn: map.get($color-config, 'warn');
  $x-button: map.get($color-config, 'x-button');
  $primary: map.get($color-config, 'primary');
  $hover-button: map.get($color-config, 'hover-button');
  $separator: map.get($color-config, 'separator');
  $secondary-background: map.get($color-config, 'secondary-background');
  $overlay-background: map.get($color-config, 'overlay-background');
  $label-color: map.get($color-config, 'label-color');
  $transparent-color: map.get($color-config, 'transparent-color');
  $active-text: map.get($color-config, 'active-text');
  $accent: map.get($color-config, 'accent');
  $accent-border: map.get($color-config, 'accent-border');
  $accent-fill: map.get($color-config, 'accent-fill');
  $accent-fill-border: map.get($color-config, 'accent-fill-border');

  .connect-qr-modal .overlay-widget .overlay-widget__content {
    padding: 0;
  }
  .overlay-widget  {
    .third-party-root-form-container, .third-party-root-form-container-shop,  .third-party-root-form-container-pos, .qr-print-modal  {
      .tpm-outer-container.pe-info-box-container-fixed {
        width: 100% !important;
        margin-left: 0 !important;
        .pe-info-box {
          .mat-card {
            .mat-card-content {
              background-color: $transparent-color;
              .content-wrapper {
                background-color: $transparent-color;
                .mat-expansion-panel {
                  background-color: $transparent-color;
                  border-bottom-color: $background;
                  &-indicator {
                    color: $text-color;
                  }
                  &-header,
                  &-header:focus,
                  &-header:hover {
                    background-color: $select-button;
                    > * {
                      color: $text-color;
                    }
                  }
                  &-body {
                    .fieldset-caption {
                      color: $label-color;
                    }
                  }
                }
                .form-table .form-fieldset .row {
                  & > [class*='col'] {
                    background-color: $row-background;
                    border-right-color: $transparent-color;
                    padding: 0;
                    &:not(:last-child){
                      border-bottom: solid 1px $background;
                    }
                  }
                }
                .mat-select-arrow-wrapper {
                  padding-bottom: 14px;
                }
                .mat-form-field-label {
                  color: $label-color;
                }
                .mat-input-element {
                  color: $text-color;
                  caret-color: $text-color;
                }
                .mat-button-block {
                  background-color: $content !important;
                  color: $confirm !important;
                  position: relative;
                  overflow: hidden;
                }
                .uninstall-button button {
                  background-color: $content;
                  color: $warn;
                }
                .pe-info-box {
                  &.tpm-verify .mat-card {
                    .mat-card-content .content-wrapper {
                      .tpm-verify-message {
                        .tpm-verify-message {
                          color: $text-color;
                        }
                      }
                    }
                    .mat-card-actions {
                      .mat-button {
                        color: $text-color;
                        &:first-of-type {
                          background-color: $warn;
                          color: $active-text;
                        }
                        &:not(:first-of-type) {
                          background-color: $content;
                        }
                      }
                    }
                  }
                  .mat-card {
                    &__content,
                    .mat-card-actions {
                      background-color: $transparent-color;
                      .content-wrapper {
                        background-color: $transparent-color;
                      }
                    }
                  }
                }
                .form-table .form-fieldset .row {
                  .field-bottom-line {
                    border-bottom-color: $border;
                  }
                }
                .mat-select-value-text {
                  color: $text-color;
                }
                .mat-form-field-suffix {
                  .mat-raised-button {
                    background-color: $transparent-color;
                    color: $confirm;
                  }
                }
                .mat-slide-toggle {
                  &-bar {
                    background-color: $x-button;
                  }
                  &-content {
                    color: $text-color;
                  }
                  &.mat-checked:not(.mat-disabled) {
                    .mat-slide-toggle-bar {
                      background-color: $hover-button;
                    }
                  }
                }
                .mat-list {
                  &-item {
                    background-color: $row-background;
                    height: auto !important;
                  }
                  &-item-col {
                    color: $text-color;
                    .mat-button-base {
                      background-color: $transparent-color;
                      .mat-button-wrapper {
                        color: $confirm;
                      }
                    }
                  }
                }
                .mat-checkbox {
                  &-label {
                    color: $text-color !important;
                  }
                  &-frame {
                    border-radius: 100%;
                    border: solid 1px $accent-border !important;
                    background-color: $accent;
                  }
                  &-checked {
                    .mat-checkbox-frame {
                      border: solid 1px $accent-fill-border !important;
                      background-color: $accent-fill;
                    }
                  }
                }
                .mat-raised-button {
                  background-color: $transparent-color;
                  color: $hover-button;
                }
              }
            }
          }
        }
      }
    }
  }
  .mat-select-panel {
      background-color: $row-background !important;
      box-shadow: 0px 5px 20px rgba(0, 0, 0, 0.2);
      backdrop-filter: blur(25px);

      .mat-option {
        background-color: $transparent-color !important;
        color: $text-color;
        border-bottom: solid 1px $row-background !important;

        &:not(:first-of-type) {
          &::before {
            background-color: $separator;
          }
        }

        .mat-option-text {
          color: $text-color;
        }

        &.mat-selected,
        &:hover {
          background-color: $hover-button !important;
          border-bottom: none !important;

          .mat-option-text {
            color: $active-text !important;
          }
        }
        &:not(:last-of-type) {
          border-bottom: 1px solid #393939;
        }
      }
      .field-bottom-line {
        border-bottom: none !important;
      }

  }
  .mat-progress-spinner {
    stroke: $spinner;
  }
}
